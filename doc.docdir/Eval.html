<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Expr.html">
<link rel="next" href="Rules.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Expr" rel="Chapter" href="Expr.html">
<link title="Eval" rel="Chapter" href="Eval.html">
<link title="Rules" rel="Chapter" href="Rules.html">
<link title="Main" rel="Chapter" href="Main.html">
<link title="Lexer" rel="Chapter" href="Lexer.html"><title>Eval</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Expr.html" title="Expr">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Rules.html" title="Rules">Next</a>
</div>
<h1>Module <a href="type_Eval.html">Eval</a></h1>

<pre><span class="keyword">module</span> Eval: <code class="code">sig</code> <a href="Eval.html">..</a> <code class="code">end</code></pre><div class="info module top">
Module implements evaluation of the proof<br>
</div>
<hr width="100%">

<pre><span id="EXCEPTIONEvalError"><span class="keyword">exception</span> EvalError</span> <span class="keyword">of</span> <code class="type">string</code></pre>

<pre><span id="TYPEexpr_properties"><span class="keyword">type</span> <code class="type"></code>expr_properties</span> = <code class="type"><a href="Rules.html#TYPEinverse_nd_rule">Rules.inverse_nd_rule</a> list * string</code> </pre>
<div class="info ">
Type expr_properties is a tuple with rules that can be applied to particular expression and error message for that expression<br>
</div>


<pre><span id="VALor_properties"><span class="keyword">val</span> or_properties</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALand_properites"><span class="keyword">val</span> and_properites</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALneg_properties"><span class="keyword">val</span> neg_properties</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALimpl_properties"><span class="keyword">val</span> impl_properties</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALvar_properties"><span class="keyword">val</span> var_properties</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALfalse_properties"><span class="keyword">val</span> false_properties</span> : <code class="type"><a href="Eval.html#TYPEexpr_properties">expr_properties</a></code></pre>
<pre><span id="VALget_fact_from_premise"><span class="keyword">val</span> get_fact_from_premise</span> : <code class="type"><a href="Expr.html#TYPEexpr">Expr.expr</a> * 'a list * <a href="Expr.html#TYPEexpr">Expr.expr</a> list * ('a -> <a href="Expr.html#TYPEexpr">Expr.expr</a> list -> <a href="Expr.html#TYPEexpr">Expr.expr</a>) -><br>       <a href="Expr.html#TYPEexpr">Expr.expr</a></code></pre><div class="info ">
function adds premise to the list of facts and
  evaluates frame's proof element by element appending 
  the result of evaluation to the list of local facts and returns the last proven fact<br>
</div>

<pre><span id="VALeval_frame"><span class="keyword">val</span> eval_frame</span> : <code class="type">[< `Frame of <a href="Expr.html#TYPEexpr">Expr.expr</a> * 'a list ] * <a href="Expr.html#TYPEexpr">Expr.expr</a> list *<br>       ('a -> <a href="Expr.html#TYPEexpr">Expr.expr</a> list -> <a href="Expr.html#TYPEexpr">Expr.expr</a>) -> <a href="Expr.html#TYPEexpr">Expr.expr</a></code></pre><div class="info ">
Function evaluates a single frame. It calls get_fact_from_premise and matches the reslut with the following expressions:
  `True - since TRUE was deduced by evaluating frame's proof the premise is returned as the expression that will be added to global list of facts.
  `False - because of rule negation introduction it returns negation of the premise
  other expression - it return implication premise =&gt; other expression<br>
</div>

<pre><span id="VALapply_rules"><span class="keyword">val</span> apply_rules</span> : <code class="type"><a href="Expr.html#TYPEexpr">Expr.expr</a> * 'a * ((<a href="Expr.html#TYPEexpr">Expr.expr</a> * 'a -> bool) list * string) -> <a href="Expr.html#TYPEexpr">Expr.expr</a></code></pre><div class="info ">
Function checks if any of the rules can be applied to the expression. 
    If it can the it returns the expression.
    Else raises an error.<br>
</div>

<pre><span id="VALeval_expr"><span class="keyword">val</span> eval_expr</span> : <code class="type"><a href="Expr.html#TYPEexpr">Expr.expr</a> -> <a href="Expr.html#TYPEexpr">Expr.expr</a> list -> <a href="Expr.html#TYPEexpr">Expr.expr</a></code></pre><div class="info ">
eval_expr function matches given expression with possible ones and tries to apply rules on it excluding 
    `Frame, `Eq and `True.
    In case of `True it return the expression.
    In case of `Eq it converts equality to conjunction of implication and calls eval_expr function on that new exprssion.
    In case of `Frame it calls eval_frame function.<br>
</div>

<pre><span id="VALeval_proof"><span class="keyword">val</span> eval_proof</span> : <code class="type"><a href="Expr.html#TYPEexpr">Expr.expr</a> -> <a href="Expr.html#TYPEexpr">Expr.expr</a> list -> <a href="Expr.html#TYPEexpr">Expr.expr</a> option</code></pre><div class="info ">
eval_proof evaluates the proof element by element calling function eval_expr.
    It appends the result of eval_expr function to list of global proven facts.
    At the end it returns the last proven formula of the proof.<br>
</div>

<pre><span id="VALget_name"><span class="keyword">val</span> get_name</span> : <code class="type">([> `Goal of 'a * 'b | `Name of 'c ] as 'a) -> 'c</code></pre><div class="info ">
Helper function for getting name of the proof<br>
</div>

<pre><span id="VALget_goal_clause"><span class="keyword">val</span> get_goal_clause</span> : <code class="type">[> `Goal of 'a * 'b ] -> 'b</code></pre><div class="info ">
Helper function for getting goal of the proof<br>
</div>

<pre><span id="VALeval"><span class="keyword">val</span> eval</span> : <code class="type"><a href="Expr.html#TYPEexpr">Expr.expr</a> -> Pervasives.out_channel -> <a href="Expr.html#TYPEexpr">Expr.expr</a> option</code></pre><div class="info ">
Main function that takes parse tree of one single proof and call eval_proof on it 
to check if the result is the same as the goal of the proof.<br>
</div>
</body></html>